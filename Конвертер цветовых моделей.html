<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конвертер цветовых моделей</title>
    <style>
        :root {
    --primary-color: #ff71fd;
    --primary-gradient: linear-gradient(135deg, #ff63e8, #ff0fef);
    --warning-color: #fc4f3c;
    --bg-color: #eef3f7;
    --card-bg: #ffffff;
    --text-color: #2c2c2c;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: var(--text-color);
    background: var(--bg-color);
    padding: 20px;
}

.container {
    max-width: 1100px;
    margin: 0 auto;
    background-color: var(--card-bg);
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    padding: 30px;
    transition: transform 0.3s ease;
}
.container:hover {
    transform: scale(1.01);
}

h1 {
    text-align: center;
    margin-bottom: 25px;
    color: #fff;
    padding: 15px;
    border-radius: 10px;
    background: var(--primary-gradient);
    box-shadow: 0 4px 12px rgba(16, 192, 192, 0.4);
}

.color-display {
    width: 100%;
    height: 120px;
    margin-bottom: 25px;
    border-radius: 10px;
    border: none;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
}

.color-models {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 25px;
}

.model {
    flex: 1;
    min-width: 300px;
    padding: 20px;
    background: #fafafa;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    transition: transform 0.2s ease;
}
.model:hover {
    transform: translateY(-5px);
}

.model h3 {
    margin-bottom: 15px;
    text-align: center;
    color: var(--primary-color);
}

.input-group {
    display: flex;
    align-items: center;
    gap: 10px;
}
input[type="range"] {
    flex: 1;
    accent-color: var(--primary-color);
}
input[type="number"] {
    width: 70px;
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

.color-palette h3 {
    text-align: center;
    margin-bottom: 10px;
    color: var(--primary-color);
}
.palette-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(20px, 1fr));
    gap: 3px;
}

.color-swatch {
    aspect-ratio: 1;
    border-radius: 3px;
    cursor: pointer;
    border: 1px solid #ccc;
    transition: transform 0.15s;
}
.color-swatch:hover {
    transform: scale(1.2);
    z-index: 2;
    border-color: #000;
}


.warning {
    color: var(--warning-color);
    font-size: 0.85em;
    margin-top: 5px;
    display: none;
    font-style: italic;
}

        
        .warning {
            color: var(--warning-color);
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .color-models {
                flex-direction: column;
            }
            
            .model {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Конвертер цветовых моделей</h1>
        
        <div class="color-display" id="colorDisplay"></div>
        
        <div class="color-models">
            <div class="model rgb-model">
                <h3>RGB модель</h3>
                <div class="color-component">
                    <label for="r">R (Красный)</label>
                    <div class="input-group">
                        <input type="range" id="r" min="0" max="255" value="0">
                        <input type="number" id="rValue" min="0" max="255" value="0">
                    </div>
                    <div class="warning" id="rWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="g">G (Зеленый)</label>
                    <div class="input-group">
                        <input type="range" id="g" min="0" max="255" value="0">
                        <input type="number" id="gValue" min="0" max="255" value="0">
                    </div>
                    <div class="warning" id="gWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="b">B (Синий)</label>
                    <div class="input-group">
                        <input type="range" id="b" min="0" max="255" value="0">
                        <input type="number" id="bValue" min="0" max="255" value="0">
                    </div>
                    <div class="warning" id="bWarning">Значение обрезано до допустимого диапазона</div>
                </div>
            </div>
            
            <div class="model cmyk-model">
                <h3>CMYK модель</h3>
                <div class="color-component">
                    <label for="c">C (Голубой)</label>
                    <div class="input-group">
                        <input type="range" id="c" min="0" max="100" value="0">
                        <input type="number" id="cValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="cWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="m">M (Пурпурный)</label>
                    <div class="input-group">
                        <input type="range" id="m" min="0" max="100" value="0">
                        <input type="number" id="mValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="mWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="y">Y (Желтый)</label>
                    <div class="input-group">
                        <input type="range" id="y" min="0" max="100" value="0">
                        <input type="number" id="yValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="yWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="k">K (Черный)</label>
                    <div class="input-group">
                        <input type="range" id="k" min="0" max="100" value="0">
                        <input type="number" id="kValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="kWarning">Значение обрезано до допустимого диапазона</div>
                </div>
            </div>
            
            <div class="model hls-model">
                <h3>HLS модель</h3>
                <div class="color-component">
                    <label for="h">H (Оттенок)</label>
                    <div class="input-group">
                        <input type="range" id="h" min="0" max="360" value="0">
                        <input type="number" id="hValue" min="0" max="360" value="0">
                    </div>
                    <div class="warning" id="hWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="l">L (Светлота)</label>
                    <div class="input-group">
                        <input type="range" id="l" min="0" max="100" value="0">
                        <input type="number" id="lValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="lWarning">Значение обрезано до допустимого диапазона</div>
                </div>
                <div class="color-component">
                    <label for="s">S (Насыщенность)</label>
                    <div class="input-group">
                        <input type="range" id="s" min="0" max="100" value="0">
                        <input type="number" id="sValue" min="0" max="100" value="0" step="0.1">
                    </div>
                    <div class="warning" id="sWarning">Значение обрезано до допустимого диапазона</div>
                </div>
            </div>
        </div>
        
        <div class="color-palette">
            <h3>Палитра цветов</h3>
            <div class="palette-grid" id="palette"></div>
        </div>
    </div>

    <script>
        let currentColor = {
            r: 0, g: 0, b: 0,
            c: 0, m: 0, y: 0, k: 100,
            h: 0, l: 0, s: 0
        };

        const colorDisplay = document.getElementById('colorDisplay');
        const palette = document.getElementById('palette');

        const rSlider = document.getElementById('r');
        const gSlider = document.getElementById('g');
        const bSlider = document.getElementById('b');
        const rInput = document.getElementById('rValue');
        const gInput = document.getElementById('gValue');
        const bInput = document.getElementById('bValue');
        
        const cSlider = document.getElementById('c');
        const mSlider = document.getElementById('m');
        const ySlider = document.getElementById('y');
        const kSlider = document.getElementById('k');
        const cInput = document.getElementById('cValue');
        const mInput = document.getElementById('mValue');
        const yInput = document.getElementById('yValue');
        const kInput = document.getElementById('kValue');
        
        const hSlider = document.getElementById('h');
        const lSlider = document.getElementById('l');
        const sSlider = document.getElementById('s');
        const hInput = document.getElementById('hValue');
        const lInput = document.getElementById('lValue');
        const sInput = document.getElementById('sValue');
        
            const warnings = {
            r: document.getElementById('rWarning'),
            g: document.getElementById('gWarning'),
            b: document.getElementById('bWarning'),
            c: document.getElementById('cWarning'),
            m: document.getElementById('mWarning'),
            y: document.getElementById('yWarning'),
            k: document.getElementById('kWarning'),
            h: document.getElementById('hWarning'),
            l: document.getElementById('lWarning'),
            s: document.getElementById('sWarning')
        };
        

function createPalette() {
    const stepsHue = 36;   
    const stepsLight = 4;  
    const stepsSat = 3;    

    for (let s = 0; s < stepsSat; s++) {
        for (let l = 1; l <= stepsLight; l++) {
            for (let h = 0; h < stepsHue; h++) {
                const hue = Math.round((360 / stepsHue) * h);
                const lightness = 25 + l * 15; 
                const saturation = 40 + s * 30; 
                const color = `hsl(${hue}, ${saturation}%, ${lightness}%)`;

                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = color;
                swatch.addEventListener('click', () => {
                    const rgb = hexToRgb(rgbToHexFromCss(color));
                    updateColorFromRgb(rgb.r, rgb.g, rgb.b);
                });
                palette.appendChild(swatch);
            }
        }
    }
}


function rgbToHexFromCss(cssColor) {
    const ctx = document.createElement("canvas").getContext("2d");
    ctx.fillStyle = cssColor;
    return ctx.fillStyle; 
}

;
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 0, g: 0, b: 0 };
        }
    
        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => {
                const hex = Math.max(0, Math.min(255, Math.round(x))).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }
        
        function rgbToCmyk(r, g, b) {
            r = r / 255;
            g = g / 255;
            b = b / 255;
            
            const k = 1 - Math.max(r, g, b);
            if (k === 1) {
                return { c: 0, m: 0, y: 0, k: 100 };
            }
            
            const c = (1 - r - k) / (1 - k);
            const m = (1 - g - k) / (1 - k);
            const y = (1 - b - k) / (1 - k);
            
            return {
                c: Math.round(c * 1000) / 10,
                m: Math.round(m * 1000) / 10,
                y: Math.round(y * 1000) / 10,
                k: Math.round(k * 1000) / 10
            };
        }
        
        function cmykToRgb(c, m, y, k) {
            c = c / 100;
            m = m / 100;
            y = y / 100;
            k = k / 100;
            
            const r = 255 * (1 - c) * (1 - k);
            const g = 255 * (1 - m) * (1 - k);
            const b = 255 * (1 - y) * (1 - k);
            
            return {
                r: Math.round(r),
                g: Math.round(g),
                b: Math.round(b)
            };
        }
        
        function rgbToHls(r, g, b) {
            r = r / 255;
            g = g / 255;
            b = b / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0; 
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                
                h /= 6;
            }
            
            return {
                h: Math.round(h * 360),
                l: Math.round(l * 1000) / 10,
                s: Math.round(s * 1000) / 10
            };
        }
        
        function hlsToRgb(h, l, s) {
            h = h / 360;
            l = l / 100;
            s = s / 100;
            
            let r, g, b;
            
            if (s === 0) {
                r = g = b = l; 
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }
        
        function updateUI() {

            colorDisplay.style.backgroundColor = rgbToHex(currentColor.r, currentColor.g, currentColor.b);
            
            rSlider.value = currentColor.r;
            gSlider.value = currentColor.g;
            bSlider.value = currentColor.b;
            rInput.value = currentColor.r;
            gInput.value = currentColor.g;
            bInput.value = currentColor.b;
            
            cSlider.value = currentColor.c;
            mSlider.value = currentColor.m;
            ySlider.value = currentColor.y;
            kSlider.value = currentColor.k;
            cInput.value = currentColor.c;
            mInput.value = currentColor.m;
            yInput.value = currentColor.y;
            kInput.value = currentColor.k;
            
            hSlider.value = currentColor.h;
            lSlider.value = currentColor.l;
            sSlider.value = currentColor.s;
            hInput.value = currentColor.h;
            lInput.value = currentColor.l;
            sInput.value = currentColor.s;
        }
        
        function updateColorFromRgb(r, g, b) {
            const validatedR = clampValue(r, 0, 255, 'r');
            const validatedG = clampValue(g, 0, 255, 'g');
            const validatedB = clampValue(b, 0, 255, 'b');
            
            currentColor.r = validatedR.value;
            currentColor.g = validatedG.value;
            currentColor.b = validatedB.value;
            
            const cmyk = rgbToCmyk(validatedR.value, validatedG.value, validatedB.value);
            currentColor.c = cmyk.c;
            currentColor.m = cmyk.m;
            currentColor.y = cmyk.y;
            currentColor.k = cmyk.k;
            
            const hls = rgbToHls(validatedR.value, validatedG.value, validatedB.value);
            currentColor.h = hls.h;
            currentColor.l = hls.l;
            currentColor.s = hls.s;
            
            updateUI();
        }
        function updateColorFromCmyk(c, m, y, k) {
            const validatedC = clampValue(c, 0, 100, 'c');
            const validatedM = clampValue(m, 0, 100, 'm');
            const validatedY = clampValue(y, 0, 100, 'y');
            const validatedK = clampValue(k, 0, 100, 'k');
            
            currentColor.c = validatedC.value;
            currentColor.m = validatedM.value;
            currentColor.y = validatedY.value;
            currentColor.k = validatedK.value;
            
            const rgb = cmykToRgb(validatedC.value, validatedM.value, validatedY.value, validatedK.value);
            currentColor.r = rgb.r;
            currentColor.g = rgb.g;
            currentColor.b = rgb.b;
            
            const hls = rgbToHls(rgb.r, rgb.g, rgb.b);
            currentColor.h = hls.h;
            currentColor.l = hls.l;
            currentColor.s = hls.s;
            
            updateUI();
        }
        
        function updateColorFromHls(h, l, s) {
            const validatedH = clampValue(h, 0, 360, 'h');
            const validatedL = clampValue(l, 0, 100, 'l');
            const validatedS = clampValue(s, 0, 100, 's');
            
            currentColor.h = validatedH.value;
            currentColor.l = validatedL.value;
            currentColor.s = validatedS.value;
            
            const rgb = hlsToRgb(validatedH.value, validatedL.value, validatedS.value);
            currentColor.r = rgb.r;
            currentColor.g = rgb.g;
            currentColor.b = rgb.b;
            
            const cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);
            currentColor.c = cmyk.c;
            currentColor.m = cmyk.m;
            currentColor.y = cmyk.y;
            currentColor.k = cmyk.k;
            
            updateUI();
        }
        
        function clampValue(value, min, max, component) {
            let clamped = parseFloat(value);
            let showWarning = false;
            
            if (isNaN(clamped)) {
                clamped = min;
                showWarning = true;
            } else if (clamped < min) {
                clamped = min;
                showWarning = true;
            } else if (clamped > max) {
                clamped = max;
                showWarning = true;
            }
            
            warnings[component].style.display = showWarning ? 'block' : 'none';
            
            return { value: clamped, warning: showWarning };
        }
        
        function init() {
            createPalette();
            updateColorFromRgb(0, 0, 255);
        
            rSlider.addEventListener('input', () => updateColorFromRgb(rSlider.value, currentColor.g, currentColor.b));
            gSlider.addEventListener('input', () => updateColorFromRgb(currentColor.r, gSlider.value, currentColor.b));
            bSlider.addEventListener('input', () => updateColorFromRgb(currentColor.r, currentColor.g, bSlider.value));
            
            rInput.addEventListener('change', () => updateColorFromRgb(rInput.value, currentColor.g, currentColor.b));
            gInput.addEventListener('change', () => updateColorFromRgb(currentColor.r, gInput.value, currentColor.b));
            bInput.addEventListener('change', () => updateColorFromRgb(currentColor.r, currentColor.g, bInput.value));
        
            cSlider.addEventListener('input', () => updateColorFromCmyk(cSlider.value, currentColor.m, currentColor.y, currentColor.k));
            mSlider.addEventListener('input', () => updateColorFromCmyk(currentColor.c, mSlider.value, currentColor.y, currentColor.k));
            ySlider.addEventListener('input', () => updateColorFromCmyk(currentColor.c, currentColor.m, ySlider.value, currentColor.k));
            kSlider.addEventListener('input', () => updateColorFromCmyk(currentColor.c, currentColor.m, currentColor.y, kSlider.value));
            
            cInput.addEventListener('change', () => updateColorFromCmyk(cInput.value, currentColor.m, currentColor.y, currentColor.k));
            mInput.addEventListener('change', () => updateColorFromCmyk(currentColor.c, mInput.value, currentColor.y, currentColor.k));
            yInput.addEventListener('change', () => updateColorFromCmyk(currentColor.c, currentColor.m, yInput.value, currentColor.k));
            kInput.addEventListener('change', () => updateColorFromCmyk(currentColor.c, currentColor.m, currentColor.y, kInput.value));
            
            hSlider.addEventListener('input', () => updateColorFromHls(hSlider.value, currentColor.l, currentColor.s));
            lSlider.addEventListener('input', () => updateColorFromHls(currentColor.h, lSlider.value, currentColor.s));
            sSlider.addEventListener('input', () => updateColorFromHls(currentColor.h, currentColor.l, sSlider.value));
            
            hInput.addEventListener('change', () => updateColorFromHls(hInput.value, currentColor.l, currentColor.s));
            lInput.addEventListener('change', () => updateColorFromHls(currentColor.h, lInput.value, currentColor.s));
            sInput.addEventListener('change', () => updateColorFromHls(currentColor.h, currentColor.l, sInput.value));
        }
        
        init();
    </script>
</body>
</html>
